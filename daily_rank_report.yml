 name: Daily Game Rank Report
    2
    3     on:
    4       schedule:
    5         # 매일 오전 9시 (UTC 기준, 한국 시간은 UTC+9이므로 00:00 UTC)
    6         - cron: '0 0 * * *'
    7       workflow_dispatch: # 수동 실행을 위한 트리거
    8
    9     jobs:
   10       build:
   11         runs-on: ubuntu-latest # GitHub Actions는 Linux 환경에서 실행됩니다.
   12
   13         steps:
   14         - name: Checkout repository
   15           uses: actions/checkout@v4
   16
   17         - name: Set up Python
   18           uses: actions/setup-python@v5
   19           with:
   20             python-version: '3.9' # 사용 중인 Python 버전에 맞게 변경 (예: '3.8', '3.9', '3.10')
   21
   22         - name: Install dependencies
   23           run: |
   24             python -m pip install --upgrade pip
   25             pip install beautifulsoup4 selenium google-cloud-translate webdriver-manager
   26
   27         - name: Create Google Cloud Key file
   28           env:
   29             GOOGLE_CREDENTIALS: ${{ secrets.GOOGLE_CREDENTIALS }} # GitHub Secrets에서 가져옴
   30           run: |
   31             echo "$GOOGLE_CREDENTIALS" > my-gcp-key.json
   32
   33         - name: Run the script
   34           env:
   35             REPORT_EMAIL: ${{ secrets.REPORT_EMAIL }}
   36             SENDER_EMAIL: ${{ secrets.SENDER_EMAIL }}
   37             SENDER_PASSWORD: ${{ secrets.SENDER_PASSWORD }}
   38             SMTP_SERVER: ${{ secrets.SMTP_SERVER }}
   39             SMTP_PORT: ${{ secrets.SMTP_PORT }}
   40           run: |
   41             python game_rank_notifier.py \
   42               --email "$REPORT_EMAIL" \
   43               --sender_email "$SENDER_EMAIL" \
   44               --sender_password "$SENDER_PASSWORD" \
   45               --smtp_server "$SMTP_SERVER" \
   46               --smtp_port "$SMTP_PORT"